{"version":3,"file":"calculateReplicaTime.js","sourceRoot":"","sources":["../../../../src/agent/http/calculateReplicaTime.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAAG,CAAC,OAAe,EAAQ,EAAE;IAC5D,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAExC,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;IAEjD,MAAM,aAAa,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC;IAE1D,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;IAEjD,MAAM,aAAa,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC;IAE1D,OAAO,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC;AACjC,CAAC,CAAC;AAEF,SAAS,kBAAkB,CAAC,KAAW,EAAE,KAAW;IAClD,OAAO,IAAI,IAAI,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AAC3D,CAAC","sourcesContent":["/**\n * Parse the expiry from the message\n * @param message an error message\n * @returns diff in milliseconds\n */\nexport const calculateReplicaTime = (message: string): Date => {\n  const [min, max] = message.split('UTC');\n\n  const minsplit = min.trim().split(' ').reverse();\n\n  const minDateString = `${minsplit[1]} ${minsplit[0]} UTC`;\n\n  const maxsplit = max.trim().split(' ').reverse();\n\n  const maxDateString = `${maxsplit[1]} ${maxsplit[0]} UTC`;\n\n  return new Date(minDateString);\n};\n\nfunction midwayBetweenDates(date1: Date, date2: Date) {\n  return new Date((date1.getTime() + date2.getTime()) / 2);\n}\n"]}